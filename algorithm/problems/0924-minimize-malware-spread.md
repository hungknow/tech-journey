# 0924 Minimize Malware Spread

## Problem Description

You are given a network of `n` nodes represented as an `n x n` adjacency matrix `graph`, where `graph[i][j] = 1` means there is a direct connection between node `i` and node `j`, and `graph[i][j] = 0` means there is no direct connection.

A node `i` is directly infected by malware if `initial[i] == 1`. When a node is infected, all nodes connected to it (directly or indirectly) will also be infected.

Your task is to find the node in `initial` that, when removed, minimizes the number of nodes infected by malware. If multiple nodes have the same effect, return the node with the smallest index.

### Example 1:
```
Input: graph = [[1,1,0],[1,1,0],[0,0,1]], initial = [0,1]
Output: 0
Explanation: Both 0 and 1 are initially infected. Removing 0 or 1 will prevent the other from being infected. Since 0 has a smaller index, we return 0.
```

### Example 2:
```
Input: graph = [[1,0,0],[0,1,0],[0,0,1]], initial = [0,2]
Output: 0
Explanation: Node 0 and 2 are initially infected, but they are in different connected components. Removing either will only prevent its own infection. Since 0 has a smaller index, we return 0.
```

### Example 3:
```
Input: graph = [[1,1,1],[1,1,1],[1,1,1]], initial = [1,2]
Output: 1
Explanation: All nodes are connected. Removing 1 will prevent 2 from infecting others, but removing 2 will not prevent 1 from infecting others.
```

## Approach

This problem can be solved using Union Find to identify connected components:

1. **Union Find Setup**: Use Union Find to group nodes into connected components based on the adjacency matrix.

2. **Component Analysis**: 
   - For each connected component, count how many initially infected nodes it contains
   - If a component has exactly one initially infected node, removing that node will save the entire component
   - If a component has multiple initially infected nodes, removing any of them won't save the component

3. **Result Calculation**:
   - For each initially infected node, if it's the only infected node in its component, calculate how many nodes would be saved
   - Select the node that saves the most nodes (or the smallest index if tied)

## Solution Code

```go
func minMalwareSpread(graph [][]int, initial []int) int {
    n := len(graph)
    parent := make([]int, n)
    
    // Initialize Union Find
    for i := range parent {
        parent[i] = i
    }
    
    var find func(x int) int
    find = func(x int) int {
        if parent[x] != x {
            parent[x] = find(parent[x])
        }
        return parent[x]
    }
    
    union := func(x, y int) {
        rootX, rootY := find(x), find(y)
        if rootX != rootY {
            parent[rootX] = rootY
        }
    }
    
    // Build connected components
    for i := 0; i < n; i++ {
        for j := 0; j < n; j++ {
            if graph[i][j] == 1 {
                union(i, j)
            }
        }
    }
    
    // Count nodes in each component
    componentSize := make(map[int]int)
    for i := 0; i < n; i++ {
        root := find(i)
        componentSize[root]++
    }
    
    // Count initially infected nodes in each component
    infectedCount := make(map[int]int)
    for _, node := range initial {
        root := find(node)
        infectedCount[root]++
    }
    
    // Find the best node to remove
    result := initial[0]
    maxSaved := -1
    
    for _, node := range initial {
        root := find(node)
        saved := 0
        if infectedCount[root] == 1 {
            saved = componentSize[root]
        }
        
        if saved > maxSaved || (saved == maxSaved && node < result) {
            maxSaved = saved
            result = node
        }
    }
    
    return result
}
```

## Complexity Analysis

- **Time**: O(n²α(n)) where n is the number of nodes and α is the inverse Ackermann function
  - Building the graph: O(n²)
  - Union Find operations: O(n²α(n)) but practically O(n²)
- **Space**: O(n) for the Union Find data structure and auxiliary maps

## Link

[LeetCode 0924 Minimize Malware Spread](https://leetcode.com/problems/minimize-malware-spread/)